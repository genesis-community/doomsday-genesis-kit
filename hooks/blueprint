#!/bin/bash

shopt -s nullglob
set -eu

declare -a merge

merge+=( "merge/doomsday.yml" )

for feature in ${GENESIS_REQUESTED_FEATURES[@]}; do
  case "${feature}" in
    (ocfp)
      merge+=( "ocfp/ocfp.yml" )
      ;;
    (doomsday)
      merge+=( merge/doomsday.yml )
      ;;
    (*)
      if [[ -f "$GENESIS_ROOT/ops/$__feature.yml" ]] ; then
        merge+=( "$GENESIS_ROOT/ops/$__feature.yml" )
      else
        echo "Unknown feature: ${feature}"
        exit 1
      fi
      ;;
  esac
done

echo ${merge[@]}
